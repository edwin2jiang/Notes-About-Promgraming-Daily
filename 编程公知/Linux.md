### Linux常用命令

---

#### find与grep命令各用于何种场合

find指令用于查找文件或目录；grep指令用于查找文件里符合条件的字符串。

#### 如何把两个文件合并成一个文件？

可以使用cat命令从文件中读入两个文件，然后将重定向到一个新的文件。比如：cat file1.txt file2.txt > file.txt

**重定向**：将输出结果重新确定方向，最基本的用法，确定方向到一个文件中。cat file1.txt file2.txt > file.txt

**管道**：将输入输出结果和一个执行命令练联系起来，而不是一个固定的文件。ls-l | grep“root”

### touch命令（功能说明：改变文件或目录时间，或生成空文件）

| 选项 |                说明                |
| :--: | :--------------------------------: |
|  -a  |           只改变存贮时间           |
|  -d  | 使用指定的日期时间，而非现在的时间 |

#### ln链接命令 

| 选项 |                      说明                       |
| :--: | :---------------------------------------------: |
|  -d  | 建立硬链接（默认属性）（没有指针，但链接数加1） |
|  -s  |   建立软链接（符号链接）（有指针和颜色反应）    |
|  -v  |                  显示执行过程                   |
|  -i  |            覆盖既有文件前先询问用户             |

#### ls列表命令

| 选项 |       说明       |
| :--: | :--------------: |
|  -l  | 使用详细格式列表 |
|  -a  |     显示所有     |
|  -d  |  只显示隐藏文件  |

#### cp复制命令

| 选项 |                       说明                       |
| :--: | :----------------------------------------------: |
|  -a  |                    效果同-dpr                    |
|  -d  |  当复制符号链接时，也将复制后的文件变成符号链接  |
|  -p  |              保留源文件或目录的属性              |
|  -r  | 递归处理，将指定目录下的所有文件和子目录一并处理 |
|  -s  |        对源文件建立符号链接，而非复制文件        |
|  -v  |                 显示指令执行过程                 |

#### rm删除命令

| 选项 |                  说明                  |
| :--: | :------------------------------------: |
|  -d  |         删除目录(实测并不生效)         |
|  -f  |           强制删除文件或目录           |
|  -r  | 递归处理（如果要删除目录，必须加这个） |

#### mv移动命令（功能说明：移动或更名现有文件或目录）

| 选项 |                         说明                         |
| :--: | :--------------------------------------------------: |
|  -b  |             若需覆盖文件，则覆盖前会备份             |
|  -f  | 若目标文件或目录与现有文件或目录重复，则直接覆盖现有 |

#### cat显示文件内容命令

| 选项 |                     说明                     |
| :--: | :------------------------------------------: |
|  -n  |                   显示行号                   |
|  -b  |        和-n类似，不过对于空白行不编号        |
|  -s  | 如果遇到连续两行以上的，就替换成一行的空白行 |

#### gzip压缩命令(生成文件末尾为.gz,默认删除源文件)

| 选项  |                             说明                             |
| :---: | :----------------------------------------------------------: |
|  -r   |                     递归处理，连同子目录                     |
|  -v   |                         显示执行过程                         |
|  -d   |                         解开压缩文件                         |
| -best |                    最高的压缩效果，执行慢                    |
| -fast |                 最快的执行效果，压缩效果较小                 |
|  -f   | 强行压缩文件，不理会文件名称或硬链接是否存在以及文件是否为符号链接 |

#### bzip2压缩命令（效果更好，默认删除源文件）

| 选项 |              说明              |
| :--: | :----------------------------: |
|  -d  |            执行解压            |
|  -f  | 若输出文件存在，则覆盖现有文件 |
|  -k  |        压缩后保留源文件        |

#### tar备份命令（tar可以用来建立，还原备份文件）

| 选项  |                      说明                      |
| :---: | :--------------------------------------------: |
| -czvf |                    压缩文件                    |
| -tzvf |                    解压文件                    |
| -chvf |                    备份目录                    |
|  -z   |            通过gzip指令处理备份文件            |
|  -j   |           通过bzip2指令处理备份文件            |
|  -c   |                建立新的备份文件                |
|  -x   |              从备份文件中还原文件              |
|  -h   | 不建立符号链接，直接复制该链接所指向的原始文件 |
|  -t   |               列出备份文件的内容               |

比较特殊，目标文件在源文件的前面

#### head/tail 显示文件的部分内容

head默认显示前10行，tail默认显示后10行。可通过-n 修改。

#### more/less逐页显示文件内容

less更为强大，可上下翻转，利用pgdown，pgup。可随时利用q退出，b回到开始。

-----

通用格式 [命令] [参数] [源文件或目录] [目标文件或目录]

-i 询问	-r 递归处理	-v显示详细过程  -f 强制做

-----

### 一看就会系列：

- #### pwd显示当前目录命令

- #### cd切换当前目录

- #### stat显示状态文件或目录的状态信息

- #### mkdir创建目录

- #### rmdir删除目录（只能删除空目录）

- #### history显示以前命令

- #### date显示时间

- #### cal显示月历命令（并不常用）

- #### login登入系统

- #### logout退出系统 （实际效果和上一条差不多）

- #### reboot重启系统

- #### shutdown关闭系统（关机）（可设置关机时间shutdown -h 23:12)、

- #### clear清除屏幕

#### 可能会出现的命令

**查找/root目录下所有名字是abc的文件**

find /root -name "abc"

**搜索当前目录（含子目录，以下同）中，所有文件名以my开头的文件。**

find . -name "my\*"

**查找1.txt里面所有包含“root”的内容并显示行数**

grep -n "root" 1.txt

```
软硬链接的区别：
1)默认不带参数情况下，ln命令创建的是硬链接。 （ln -s 创建软链接）
2)硬链接文件与源文件的inode节点号相同，而软链接文件的inode节点号与源文件不同。
3)ln命令不能对目录创建硬链接，但可以创建软链接，对目录的软链接会经常被用到。
4)删除软链接文件,对源文件及硬链接文件无任何影响；
5)删除文件的硬链接文件，对源文件及软链接文件无任何影响；
6)删除链接文件的原文件，对硬链接文件无影响，会导致其软链接失效（红底白字闪烁状）；
7)同时删除原文件及其硬链接文件，整个文件才会被真正的删除。
8)很多硬件设备中的快照功能，使用的就类似硬链接的原理。
9)软链接可以跨文件系统，硬链接不可以跨文件系统。
```

比较重要的：

- 默认不带参数情况下，ln命令创建的是硬链接
- ln命令不能对目录创建硬链接，但可以创建软链接，对目录的软链接会经常被用到
- 删除链接文件的原文件，对硬链接文件无影响，会导致其软链接失效（红底白字闪烁状）
- 同时删除原文件及其硬链接文件，整个文件才会被真正的删除。

#### Linux系统下文件颜色

```
白色：表示普通文件
蓝色：表示目录
绿色：表示可执行文件
红色：表示压缩文件
浅蓝色：链接文件]
红色闪烁：表示链接的文件有问题
黄色：表示设备文件
灰色：表示其他文件
```

## LINUX文本编辑

#### 写一个合适的VI环境配置文件

当用户打开VI编辑器时，会自动查看用户当前工作目录中的“.exrc”文件

set nu 显示行数

set report=4  提示反馈信息，参数为发生变化的最小行数

set sw 设置自动缩进的空格数

----

VI的启动，使用命令vi+文件名，启动VI。

VI的存盘，使用命令：wq，保存并退出。

VI的文本输入，使用命令a、A、i、I、O、o，进行文本文本输入。

VI的现有文件的打开，使用命令vi+已有文件名，打开现有文件。

VI的光标移动，使用方向键、K/j/h/l、nH等方式，进行光标的移动。

VI的复制/粘贴，进入命令模式后，使用yy命令复制光标所在的一整行，接着使用p命令粘贴在光标后。也可使用yw命令复制光标所在单词，接着使用p命令粘贴在光标后。

VI的剪切/粘贴，进入命令模式后，使用dd命令复制光标所在的一整行，接着使用p命令粘贴在光标后。也可使用dw命令复制光标所在单词，接着使用p命令粘贴在光标后。

VI的查找命令，进入命令模式后，输入/hello，即可查找字符串hello，找到显示橘黄色高亮

VI的替换操作，进入命令模式后，输入:/%s/we/hello/g，即可查找替换所有的字符串we，将之替换成字符串hello，当然除此以外还有很多替换方式，诸如cw、r、cb。

/%s/替换前字符串/替换后字符串/g   替换每一行中每一个字符

50,100s/man/MAN/gc  替换50到100行里所有的man为MAN,并一个个确认

e！进行复原

----

#### 光标可移动单位有哪些？它们分别有哪些移动方式？

以字符为单位，可使用方向键或者k/j/hl，移动光标。

以单词为单位，可使用Esc+b/+f，向前/后移动一个单词。

以行为单位，nG，跳转到第n行；nH，将光标移动屏幕的第n行。

以页为单位，Ctrl+b，向上移动一页；Ctrl+f，向下移动一页。

按一个G，跳转到末尾

nx 删除光标以后n个字符

### LINUX用户和用户组的管理

用户账号配置文件/etc/passwd

用户密码配置文件/etc/shadow

用户组配置的文件/etc/group

#### usermod修改用户账号

| 选项                  | 说明                    |
| --------------------- | ----------------------- |
| -L user_name          | 将user_name账号锁定     |
| -U user_name          | 将user_name账号解锁     |
| -G grouplist username | 将username分配给group组 |
| -l login_name         | 修改login_name          |
| -c comment            | 修改账号的描述字段      |
| -md                   | 修改主目录              |

##### 更改用户名

 将nick账号修改成juju

usermod -l juju -c "juju" -m -d /home/juju nick

##### userdel 删除用户账号

如果加参数-r,就将删除用户的主目录以及主目录下的所有文件。

##### 指定用户过期时间

change -E 2020/12/31 juju

#### 用户权限管理

文件所有者 u

文件所属组 g

其他用户 o

所有用户 a

##### chmod 改变文件或目录权限

设置所有人都有权限读取

chmod ugo+r juju.txt

chmod a+r juju.txt

也可用三个八进制数字表示

读权限、写权限、可执行权限分别为4、2、1

chmod 444 juju.txt

第一位表示档案拥有者的权限

第二位表示群组的权限

第三位表示其他人的权限

chown nick /home/juju.txt

将juju.txt所有者修改为nick

chgrp 更改文件和目录的所属组

chgrp [选项] 所属组 文件和目录列表

#### 组的操作

group -g 521 juju GID设置为521

groupdel juju   删除组juju

groupmod 组属性的修改

